-- [[ AYARLAR ]] --
local targetEggName = "Cyberpunk"  -- AÃ§Ä±lacak yumurta adÄ± (GÃ¼ncellendi)
local teleportZoneName = "Cyberpunk" -- IÅŸÄ±nlanÄ±lacak ada/bÃ¶lge adÄ±
local openAmount = 8 
local hatchSpeed = 0 

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")
local Players = game:GetService("Players")
local Lighting = game:GetService("Lighting")
local lp = Players.LocalPlayer

-- [[ 1. DÄ°NAMÄ°K REMOTE BULUCU ]] --
local function getGameRemote(remoteName)
    for _, obj in ipairs(ReplicatedStorage:GetChildren()) do
        local functions = obj:FindFirstChild("Functions")
        if functions then
            local target = functions:FindFirstChild(remoteName)
            if target then
                return target
            end
        end
    end
    return nil
end

-- [[ 2. AGRESÄ°F FPS BOOST (DÃœNYAYI TEMÄ°ZLE) ]] --
local function nukeWorld()
    for _, obj in pairs(Workspace:GetChildren()) do
        if obj.Name ~= lp.Name and 
           obj.Name ~= "Camera" and 
           obj.Name ~= "Eggs" and 
           obj.Name ~= "SafetyFloor" and -- Zemin korumasÄ± eklendi
           not obj:IsA("Terrain") then
            pcall(function() obj:Destroy() end)
        end
    end

    local eggsFolder = Workspace:FindFirstChild("Eggs")
    if eggsFolder then
        for _, egg in pairs(eggsFolder:GetChildren()) do
            if not egg.Name:find(targetEggName) then
                pcall(function() egg:Destroy() end)
            end
        end
    end
    Workspace.Terrain:Clear()
end

-- [[ 3. HAVA DURUMUNU VE EFEKTLERÄ° SIFIRLA ]] --
local function cleanLighting()
    Lighting.GlobalShadows = false
    Lighting.FogEnd = 9e9
    Lighting.Brightness = 1
    Lighting.ClockTime = 12
    Lighting.OutdoorAmbient = Color3.fromRGB(128, 128, 128)
    
    for _, effect in pairs(Lighting:GetChildren()) do
        if effect:IsA("PostEffect") or effect:IsA("Sky") or effect:IsA("Clouds") then
            effect:Destroy()
        end
    end
    
    local sky = Instance.new("Sky", Lighting)
    sky.SunTextureId = ""
    sky.MoonTextureId = ""
end

-- [[ 4. YUMURTAYI GÄ°ZLE ]] --
local function hideEgg(eggModel)
    if eggModel then
        for _, part in pairs(eggModel:GetDescendants()) do
            if part:IsA("BasePart") or part:IsA("MeshPart") then
                part.Transparency = 1 
                part.CastShadow = false
            elseif part:IsA("Decal") or part:IsA("Texture") then
                part:Destroy()
            elseif part:IsA("ParticleEmitter") or part:IsA("Trail") then
                part.Enabled = false
            end
        end
    end
end

-- [[ 5. GÃœVENLÄ° ZEMÄ°N ]] --
local function createFloorAtEgg(target)
    local floor = Instance.new("Part")
    floor.Name = "SafetyFloor"
    floor.Size = Vector3.new(50, 2, 50)
    floor.CFrame = target:GetPivot() * CFrame.new(0, -5, 0)
    floor.Anchored = true
    floor.Transparency = 0.5 
    floor.BrickColor = BrickColor.new("Bright blue")
    floor.Parent = Workspace
    return floor
end

-- [[ ANA Ã‡ALIÅTIRICI ]] --

-- ADIM 1: Adaya IÅŸÄ±nlan
local tpRemote = getGameRemote("TeleportZone")
if tpRemote then
    print("ğŸŒ " .. teleportZoneName .. " adasÄ±na Ä±ÅŸÄ±nlanÄ±lÄ±yor...")
    tpRemote:InvokeServer(teleportZoneName)
    task.wait(1) 
else
    warn("âš ï¸ Teleport Remote bulunamadÄ±!")
end

-- ADIM 2: YumurtayÄ± Bul ve DÃ¼nyayÄ± HazÄ±rla
local eggsFolder = Workspace:FindFirstChild("Eggs")
local eggModel = eggsFolder and (eggsFolder:FindFirstChild(targetEggName) or eggsFolder:FindFirstChild(targetEggName .. " Egg"))

if eggModel then
    nukeWorld()
    cleanLighting()
    createFloorAtEgg(eggModel)
    hideEgg(eggModel)
    
    task.wait(0.2)
    if lp.Character then
        lp.Character:PivotTo(eggModel:GetPivot() * CFrame.new(0, 0, 2))
    end
    
    -- ADIM 3: Auto Hatch
    _G.AutoHatch = false
    print("ğŸš€ Sistem Aktif: " .. targetEggName .. " aÃ§Ä±lÄ±yor!")

    task.spawn(function()
        while _G.AutoHatch do
            local openRemote = getGameRemote("OpenEgg")
            if openRemote then
                -- Cyberpunk veya Cyberpunk Egg ikisini de dener
                local success = openRemote:InvokeServer(targetEggName, openAmount)
                if not success then
                    openRemote:InvokeServer(targetEggName .. " Egg", openAmount)
                end
            end
            task.wait(hatchSpeed)
        end
    end)
else
    warn("âŒ Hedef yumurta (" .. targetEggName .. ") Ä±ÅŸÄ±nlanÄ±lan adada bulunamadÄ±!")
end
